"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2167],{2167:(T,O,p)=>{p.r(O),p.d(O,{OtpPageModule:()=>j});var f=p(177),u=p(4341),l=p(4742),_=p(7291),P=p(467),h=p(7464),n=p(4438),C=p(8556);const m=[{path:"",component:(()=>{var s;class g{constructor(o,t,i){this.router=o,this.toastController=t,this.storageService=i,this.otp=["","","","","",""],this.telepon="",this.formattedPhone="",this.isVerifying=!1,this.resendDisabled=!0,this.countdown=60}ngOnInit(){this.telepon=this.storageService.getPhoneNumber()||"",this.formattedPhone=this.telepon.substring(0,4)+"********",this.startResendCountdown()}moveToNext(o,t){1===o.target.value.length&&t&&t.focus(),this.checkOTP()}handleBackspace(o,t,i){"Backspace"===o.key&&""===(null==i?void 0:i.value)&&t&&t.focus()}checkOTP(){this.otp.every(o=>""!==o)&&this.verifyOTP()}verifyOTP(){var o=this;return(0,P.A)(function*(){o.isVerifying=!0;const t=o.otp.join("");h.pX.post({url:"https://epos.pringapus.com/api/v1/Authentication/verifOtp",headers:{"Content-Type":"application/json"},data:{phone:o.telepon,otp:t}}).then(i=>{i.data.status?(o.showToast("OTP Valid! Lanjut ke Update Password.","success"),o.router.navigate(["/edit-pass/set-pass"])):(o.showToast("OTP Salah atau Expired! Coba lagi.","danger"),o.otp=["","","","","",""])}).catch(i=>{console.error("Error verifying OTP:",i),o.showToast("Gagal memverifikasi OTP.","danger")}).finally(()=>{o.isVerifying=!1})})()}startResendCountdown(){this.resendDisabled=!0,this.countdown=60;const o=setInterval(()=>{this.countdown--,0===this.countdown&&(clearInterval(o),this.resendDisabled=!1)},1e3)}resendOTP(){h.pX.post({url:"https://epos.pringapus.com/api/v1/Authentication/requestOtp",headers:{"Content-Type":"application/json"},data:{phone:this.telepon}}).then(o=>{o.data.status?(this.showToast("Kode OTP telah dikirim ulang.","success"),this.startResendCountdown()):this.showToast("Gagal mengirim ulang OTP.","danger")}).catch(o=>{console.error("Error resending OTP:",o),this.showToast("Terjadi kesalahan saat mengirim ulang OTP.","danger")})}showToast(o,t){var i=this;return(0,P.A)(function*(){(yield i.toastController.create({message:o,duration:2e3,color:t})).present()})()}}return(s=g).\u0275fac=function(o){return new(o||s)(n.rXU(_.Ix),n.rXU(l.K_),n.rXU(C.n))},s.\u0275cmp=n.VBU({type:s,selectors:[["app-otp"]],standalone:!1,decls:31,vars:9,consts:[["otp1",""],["otp2",""],["otp3",""],["otp4",""],["otp5",""],["otp6",""],["slot","start","fill","clear","size","small",3,"click"],["name","chevron-back-outline",2,"color","#FC9C4C","font-size","2rem"],[2,"color","black"],[1,"otp-container"],[1,"otp-title"],[1,"otp-inputs"],["type","text","maxlength","1",3,"input","keydown","ngModelChange","ngModel"],[1,"btn"],["expand","block","shape","round",3,"click","disabled"],[1,"resend-text"],["fill","clear",3,"click","disabled"]],template:function(o,t){if(1&o){const i=n.RV6();n.j41(0,"ion-header")(1,"ion-button",6),n.bIt("click",function(){return n.eBV(i),n.Njj(t.router.navigate(["/edit-pass"]))}),n.nrm(2,"ion-icon",7),n.k0s(),n.j41(3,"ion-title",8),n.EFF(4,"Verifikasi OTP"),n.k0s()(),n.j41(5,"ion-content")(6,"ion-grid")(7,"div",9)(8,"p",10),n.EFF(9,"Enter the 6 digit verification code."),n.k0s(),n.j41(10,"div",11)(11,"input",12,0),n.bIt("input",function(e){n.eBV(i);const r=n.sdS(14);return n.Njj(t.moveToNext(e,r))})("keydown",function(e){n.eBV(i);const r=n.sdS(12);return n.Njj(t.handleBackspace(e,r))}),n.mxI("ngModelChange",function(e){return n.eBV(i),n.DH7(t.otp[0],e)||(t.otp[0]=e),n.Njj(e)}),n.k0s(),n.j41(13,"input",12,1),n.bIt("input",function(e){n.eBV(i);const r=n.sdS(16);return n.Njj(t.moveToNext(e,r))})("keydown",function(e){n.eBV(i);const r=n.sdS(12),c=n.sdS(14);return n.Njj(t.handleBackspace(e,r,c))}),n.mxI("ngModelChange",function(e){return n.eBV(i),n.DH7(t.otp[1],e)||(t.otp[1]=e),n.Njj(e)}),n.k0s(),n.j41(15,"input",12,2),n.bIt("input",function(e){n.eBV(i);const r=n.sdS(18);return n.Njj(t.moveToNext(e,r))})("keydown",function(e){n.eBV(i);const r=n.sdS(14),c=n.sdS(16);return n.Njj(t.handleBackspace(e,r,c))}),n.mxI("ngModelChange",function(e){return n.eBV(i),n.DH7(t.otp[2],e)||(t.otp[2]=e),n.Njj(e)}),n.k0s(),n.j41(17,"input",12,3),n.bIt("input",function(e){n.eBV(i);const r=n.sdS(20);return n.Njj(t.moveToNext(e,r))})("keydown",function(e){n.eBV(i);const r=n.sdS(16),c=n.sdS(18);return n.Njj(t.handleBackspace(e,r,c))}),n.mxI("ngModelChange",function(e){return n.eBV(i),n.DH7(t.otp[3],e)||(t.otp[3]=e),n.Njj(e)}),n.k0s(),n.j41(19,"input",12,4),n.bIt("input",function(e){n.eBV(i);const r=n.sdS(22);return n.Njj(t.moveToNext(e,r))})("keydown",function(e){n.eBV(i);const r=n.sdS(18),c=n.sdS(20);return n.Njj(t.handleBackspace(e,r,c))}),n.mxI("ngModelChange",function(e){return n.eBV(i),n.DH7(t.otp[4],e)||(t.otp[4]=e),n.Njj(e)}),n.k0s(),n.j41(21,"input",12,5),n.bIt("input",function(){return n.eBV(i),n.Njj(t.verifyOTP())})("keydown",function(e){n.eBV(i);const r=n.sdS(20),c=n.sdS(22);return n.Njj(t.handleBackspace(e,r,c))}),n.mxI("ngModelChange",function(e){return n.eBV(i),n.DH7(t.otp[5],e)||(t.otp[5]=e),n.Njj(e)}),n.k0s()(),n.j41(23,"div",13)(24,"ion-button",14),n.bIt("click",function(){return n.eBV(i),n.Njj(t.verifyOTP())}),n.j41(25,"ion-title"),n.EFF(26,"Verifikasi OTP"),n.k0s()()(),n.j41(27,"p",15)(28,"ion-button",16),n.bIt("click",function(){return n.eBV(i),n.Njj(t.resendOTP())}),n.j41(29,"ion-title"),n.EFF(30),n.k0s()()()()()()}2&o&&(n.R7$(11),n.R50("ngModel",t.otp[0]),n.R7$(2),n.R50("ngModel",t.otp[1]),n.R7$(2),n.R50("ngModel",t.otp[2]),n.R7$(2),n.R50("ngModel",t.otp[3]),n.R7$(2),n.R50("ngModel",t.otp[4]),n.R7$(2),n.R50("ngModel",t.otp[5]),n.R7$(3),n.Y8G("disabled",t.isVerifying),n.R7$(4),n.Y8G("disabled",t.resendDisabled),n.R7$(2),n.SpI("Resend OTP ",t.resendDisabled?"("+t.countdown+"s)":"",""))},dependencies:[u.me,u.BC,u.tU,u.vS,l.Jm,l.W9,l.lO,l.eU,l.iq,l.BC],styles:["ion-header[_ngcontent-%COMP%]{padding:20px 0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:#fff}ion-header[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{font-weight:700;font-size:larger;text-align:center}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{position:absolute;left:1rem}ion-content[_ngcontent-%COMP%]{--background: white}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]{background:#fff;color:#424242;margin:2rem}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#424242;text-align:center}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .otp-title[_ngcontent-%COMP%]{font-size:medium;color:#424242;margin:1rem 0 2rem}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin:1rem}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:45px;height:50px;font-size:22px;text-align:center;background:transparent;border:2px solid #ccc;border-radius:10px;outline:none;transition:.3s}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .otp-inputs[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#febb4b;box-shadow:0 0 5px #007bff80}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:3rem 0 0;--background: #CF8F24}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff;font-size:medium}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .resend-text[_ngcontent-%COMP%]{margin-top:10px;font-size:14px}ion-content[_ngcontent-%COMP%]   ion-grid[_ngcontent-%COMP%]   .otp-container[_ngcontent-%COMP%]   .resend-text[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--color: #858585;font-size:medium}"]}),g})()}];let M=(()=>{var s;class g{}return(s=g).\u0275fac=function(o){return new(o||s)},s.\u0275mod=n.$C({type:s}),s.\u0275inj=n.G2t({imports:[_.iI.forChild(m),_.iI]}),g})(),j=(()=>{var s;class g{}return(s=g).\u0275fac=function(o){return new(o||s)},s.\u0275mod=n.$C({type:s}),s.\u0275inj=n.G2t({imports:[f.MD,u.YN,l.bv,M]}),g})()}}]);