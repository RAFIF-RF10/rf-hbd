<ion-content>

  <div class="container-find">
    <ion-row>
      
      <ion-col size="10">
        <ion-searchbar
          showCancelButton="focus"
          class="custom"
          [(ngModel)]="searchQuery"
          (ionInput)="filterCampaigns()"
        ></ion-searchbar>
      </ion-col>

      <ion-col size="2">
        <div class="btn-reload">
          <ion-button *ngIf="!isAllDataLoaded" (click)="loadMoreData()">
            <ion-icon slot="icon-only" name="refresh-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-col>

    </ion-row>

    <div class="add-btn">
      <button (click)="openAddCampaignModal()"><ion-icon name="person-add-outline"></ion-icon> Tambah Campaign Baru</button>
    </div>

  </div>

  
  <div class="container-main">

    <ion-loading class="custom-loading" [isOpen]="isLoading" message="Loading..." [duration]="3000"></ion-loading>
    <ion-list>
      <div *ngFor="let campaign of filteredCampaigns; let ind = index">
        <div class="profile">
          <ion-icon name="person-circle-outline"></ion-icon>
        </div>
        <ion-grid class="name">
          <ion-title>{{ campaign.name }}</ion-title>
          <ion-title class="desk">{{ campaign.description }}</ion-title>
        </ion-grid>
        <!-- <ion-grid class="date">
          <ion-title> {{ campaign.date_campign }}</ion-title>
          <ion-title> {{ campaign.phone_list.length }} kontak</ion-title>
        </ion-grid> -->
      </div>    
      
    </ion-list>
  
    <ion-modal [isOpen]="isAddCampaignModalOpen" (ionModalDidDismiss)="closeAddCampaignModal()">
      <ng-template>

        <ion-header>
          <ion-button slot="start" fill="clear" size="small" (click)="closeAddCampaignModal()" > 
            <ion-icon style="color:#FC9C4C; font-size: 2rem;" name="chevron-back-outline"></ion-icon>
          </ion-button>
          <ion-title style="color: black;">Tambah Campaign</ion-title>
        </ion-header>
  
      
        <ion-content>
  
          <div class="content" *ngIf="customer.length > 0">

            <ion-grid class="form-phone">
              <ion-title>Pilih Kontak</ion-title>
              <ion-item *ngFor="let contact of customer">
                <div class="checkbox">
                  <ion-checkbox [(ngModel)]="contact.selected"></ion-checkbox>
                </div>
                <div class="contact" *ngIf="contact">
                  <ion-title>{{ contact.name }}</ion-title>
                  <ion-title>{{ contact.number }}</ion-title>
                </div>
              </ion-item>
            </ion-grid>
  
            <ion-grid class="form">
              <ion-input [(ngModel)]="chatData.name" type="text" label="Nama Campaign" label-placement="floating" required></ion-input>
            </ion-grid>

            <ion-grid class="form">
              <ion-input [(ngModel)]="chatData.description" type="text" label="Deskripsi Campaign" label-placement="floating" required></ion-input>
            </ion-grid>
            
            
            
            <!-- <ion-accordion-group>
              <ion-accordion value="1">
                <ion-item slot="header" color="light">
                  <ion-label>Real / Custom Time</ion-label>
                </ion-item>
                <div class="ion-padding" slot="content">
                  <ion-grid>
                    
                      <ion-row>
                        <ion-col size="8"><b><span>(Rekomendasi)</span>Membership</b></ion-col>
                        <ion-col size="4">Gold</ion-col>
                        
                        <ion-col size="8"><b>Limit kontak</b></ion-col>
                        <ion-col size="4">No Limit</ion-col>
                        
                        <ion-col size="8"><b>Waktu Pengiriman</b></ion-col>
                        <ion-col size="4">Real / Custom Time</ion-col>
                      </ion-row>
                      <ion-row style="border-top: 1px solid lightgray;">
                        <ion-col size="6">
                          <ion-button expand="block" (click)="openDialog()">Real/Custom Time</ion-button>
                        </ion-col>
                      </ion-row>
                    
                  </ion-grid>
                </div>
              </ion-accordion>
  
              <ion-accordion value="2">
                <ion-item slot="header" color="light">
                  <ion-label>Custom Time</ion-label>
                </ion-item>
                <div class="ion-padding" slot="content">
                  <ion-grid>
                    
                      <ion-row>
                        <ion-col size="8"><b><span>(Rekomendasi)</span>Membership</b></ion-col>
                        <ion-col size="4">Silver</ion-col>
                        
                        <ion-col size="8"><b>Batas Kontak</b></ion-col>
                        <ion-col size="4">25 Kontak</ion-col>
                        
                        <ion-col size="8"><b>Waktu Pengiriman</b></ion-col>
                          <ion-col size="4">Custome Time</ion-col>
                      </ion-row>
  
                      <ion-footer>
                        <ion-toolbar>
                          <ion-row>
                            <ion-col size="12" class="ion-align-items-end">
                              <ion-button expand="block" (click)="openDialogSigle()">Custom Time</ion-button>
                            </ion-col>
                          </ion-row>
                        </ion-toolbar>
                      </ion-footer>
                      
                  </ion-grid>
                </div>
              </ion-accordion>
  
              <ion-accordion value="3">
                <ion-item slot="header" color="light">
                  <ion-label>Real Time</ion-label>
                </ion-item>
                <div class="ion-padding" slot="content">
                  <ion-grid>
                    
                      <ion-row>
                        <ion-col size="8"><b><span>(Rekomendasi)</span>Membership</b></ion-col>
                        <ion-col size="4">Bronze</ion-col>
                        
                        <ion-col size="8"><b>Batas Kontak</b></ion-col>
                        <ion-col size="4">15 Kontak</ion-col>
                        
                          <ion-col size="8"><b>Waktu Pengiriman</b></ion-col>
                          <ion-col size="4">Real Time</ion-col>
                        </ion-row>
                        
                        <ion-footer>
                          <ion-toolbar>
                            <ion-row>
                              <ion-col size="12" class="ion-align-items-end">
                                <ion-button expand="block" (click)="submitNewCampaign()">Kirim</ion-button>
                              </ion-col>
                            </ion-row>
                          </ion-toolbar>
                        </ion-footer>
                      
                    </ion-grid>
                </div>
              </ion-accordion>
            </ion-accordion-group> -->

            <ion-grid class="accordion">

              <ion-toolbar>
                <ion-title slot="start">* Pengaturan waktu pengiriman</ion-title>
              </ion-toolbar>


              <ion-grid class="value" (click)="goldprivilege()">
                <ion-row>
                  <ion-title>Real / Custom Time</ion-title>
                  <ion-icon name="chevron-down-outline" *ngIf="!goldPrivilege"></ion-icon>
                  <ion-icon name="chevron-up-outline" *ngIf="goldPrivilege"></ion-icon>
                </ion-row>
              </ion-grid>
              <ion-grid class="value-item" *ngIf="goldPrivilege">
                <ion-row>

                    <!-- <ion-col size="8"><b><span>(Rekomendasi)</span>Membership</b></ion-col>
                    <ion-col size="4">Gold</ion-col> -->
                    
                    <div class="membership">
                      
                    </div>

                    <ion-col size="8"><b>Batas Kontak</b></ion-col>
                    <ion-col size="4">15 Kontak</ion-col>
                    
                      <!-- <ion-col size="8"><b>Waktu Pengiriman</b></ion-col>
                      <ion-col size="4">Real Time</ion-col> -->

                      <ion-button expand="block" (click)="openDialog()">Real/Custom Time</ion-button>
                </ion-row>
              </ion-grid>


              <ion-grid class="value">
                <ion-row>
                  <ion-title>Custom Time</ion-title>
                  <ion-icon name="chevron-down-outline"></ion-icon>
                </ion-row>
              </ion-grid>

              <ion-grid class="value">
                <ion-row>
                  <ion-title>Real Time</ion-title>
                  <ion-icon name="chevron-down-outline"></ion-icon>
                </ion-row>
              </ion-grid>

            </ion-grid>
            
          </div>
        </ion-content>

      </ng-template>
    </ion-modal>
  

  </div>
</ion-content>
